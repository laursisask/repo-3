allprojects {
  ext."signing.keyId" = signingKeyId
  ext."signing.secretKeyRingFile" = signingSecretKeyRingFile
  ext."signing.password" = signingPassword

  ext.environmentValue = { key ->
    System.getenv(key as String)?.trim() ?: null
  }
}

artifactory {
  contextUrl = "https://trusona.jfrog.io/trusona/"

  publish {
    repository {
      repoKey =  environmentValue.call("TRAVIS_TAG") ? "sdk-public-releases-local" : "sdk-public-snapshots-local"
      username = System.getenv("artifactory_username") ?: trusonaUsername
      password = System.getenv("artifactory_password") ?: trusonaPassword
      maven = true
    }
    defaults {
      publications("mavenJava")
      publishArtifacts = true
      publishPom = true
    }
  }
  resolve {
    repository {
      repoKey =  environmentValue.call("TRAVIS_TAG") ? "sdk-public-releases-local" : "sdk-public-snapshots-local"
      username = System.getenv("artifactory_username") ?: trusonaUsername
      password = System.getenv("artifactory_password") ?: trusonaPassword
      maven = true
    }
  }
}

jacoco {
  toolVersion = "0.8.2"
}

spotbugs {
  showProgress = true
}

spotbugsMain {
  reports {
    xml.enabled = false
    html.enabled = true
  }
}

spotbugsTest {
  enabled = false
}