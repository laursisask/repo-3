task sourceJar(type: Jar) {
  from sourceSets.main.allJava
  classifier "sources"
}

javadoc {
  source = sourceSets.main.allJava
  classpath = configurations.compileClasspath
  title = "Trusona SDK"
  options {
    memberLevel = JavadocMemberLevel.PUBLIC
    source = "1.7"
  }
}

task javadocZip(type: Zip) {
  dependsOn javadoc

  from "${javadoc.destinationDir}/.."
  into "${project.name}-${project.version}"
  archiveName = "${project.name}-${project.version}.zip"
}

publishing {
  publications {
    mavenJava(MavenPublication) {
      from components.java

      artifact sourceJar
      artifact javadocZip
    }
  }
}

dependencies {
  compile(project(':trusona-sdk-http'))
  compile(project(':trusona-sdk-resources'))

  testCompile("org.codehaus.groovy:groovy-all:2.4.11")
  testCompile("org.spockframework:spock-core:1.1-groovy-2.4")
  testCompile("com.squareup.okhttp3:mockwebserver:3.9.1")
}
